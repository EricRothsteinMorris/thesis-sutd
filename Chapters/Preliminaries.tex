%!TEX root = ../main.tex
% Chapter Template


\chapter{Preliminaries and Notation} % Main chapter title
\label{ch:Preliminaries} % Change X to a consecutive number; for referencing this chapter elsewhere, use \ref{ChapterX}

\todo[inline]{This first page should have an index from concepts to the page where they are explained/defined. There should be a bit of redundancy with the glossary at the end, but I feel it makes the thesis easier to navigate: search preliminaries, and you're there. THIS SECTION HAS CONTENT THAT I DID NOT DEVELOP. The newer content comes in the following chapters}
%----------------------------------------------------------------------------------------
%	SECTION 1
%----------------------------------------------------------------------------------------
\section{Notation}
\subsection{Glossary}
\todo[inline]{Graph of a function}

\section{Categories}
\begin{definition}[Categories, Objects and Arrows]
    A \emph{category} $\AsCategory{C}$ is a mathematical concept similar to a graph, comprised of two aspects: a collection of \emph{objects}, denoted $Obj(\AsCategory{C})$, and a collection of \emph{arrows} among those objects, denoted $Arr(\AsCategory{C})$. Each category satisfies the following simple rules:
    \begin{itemize}
        \item Every object $o$ has an identity arrow that maps $o$ to itself, denoted $\id_o$
        \item Arrows can be composed
    \end{itemize}
\end{definition}

\section{The Category of Sets and Functions}
\begin{definition}[The Category of Sets and Functions $\AsCategory{Set}$]
    The \emph{category of sets and functions} $\AsCategory{Set}$ is the category whose objects are sets and whose arrows are functions. 
\end{definition}

\subsection{Set, Functions, and Types}
We denote sets by upper-case letters $X,Y,Z,\ldots$ and we denote functions by lower-case letters $f,g,h,\ldots$. We say that a function is of type $f\colon X\rightarrow Y$ to imply that it maps elements from the set $X$ to the set $Y$. Alternatively, we say that $f\in Y^X$

Through this document we are rather informal with the difference between between sets and types.  

We say that an endofunction $f\colon X \rightarrow X$ has finite support iff $f(x)\neq x$ for a finite number of $x$ in $X$.
\section{Universal (Co)Algebra}
\label{sec:Preliminaries:Coalgebras}
\todo[inline]{Make sure you create a wonderful introduction to the world of (co)algebras and explain why you want to use them. They are a wonderful way to unify the formalism of the thesis.}
\subsection{Categories and Functors}
A \emph{category} $\AsCategory{C}$ is a collection of \emph{objects} and \emph{arrows} among those objects. We denote the set of objects by
\todo[inline]{Complete here}
%\todo[inline]{*Puts an Edna Mode face* NO MONADS (unless necessary)}
%\subsection{$\Monad$-algebras, $\Functor$-coalgebras and $\lambda$-bialgebras}
\subsection{$F$-coalgebras and their Homomorphisms}
An \emph{$F$-coalgebra} for a functor $F$ is a pair $(X,X\xrightarrow{c}F(X))$ of an object $X$ and a morphism $c\colon X\rightarrow F(X)$. We use $F$-coalgebras to model dynamic systems with state. 
\begin{example}
We can model systems whose states have one component of type $O$ and that can perform state transitions on inputs of type $I$ by means of the functor $F(X)=O\times X^I$. An $F-$coalgebra is of the form $(X,X\xrightarrow{(o,\delta)}O\times X^I)$, with $o\colon X\rightarrow O$ and $\delta\colon X\rightarrow X^I$; the function $o$ lets us explore the component in the state $x$, and $\delta$ lets us perform transitions. We often write $x.o$ instead of $o(x)$, and we write $x^i$ as a shorthand for $\delta(x)(i)$. Deterministic automata that recognise sequences from an alphabet $A$ can be modelled with coalgebras of the functor $G(X)=2\times X^A$.
\end{example}
\subsection{Pointed coalgebras}
Pointed coalgebras are coalgebras with a distinguished state, usually referred to as the \emph{initial state}. Formally, for a functor $F$, a pointed $F$-coalgebra is a triple $(X,c, x_0)$ where $(X,c)$ is an $F$-coalgebra and $(X, x_0)$ is a $\Delta_X$-algebra, i.e., $x_0\colon 1\rightarrow X$, and $x_0(\star)$ characterises the initial state.
\subsection{States and Components}
We often use vectors/tuples as a states. We access the values inside states by means of projection functions. If the carrier is a product set $\vec{X}=Y_1 \times\ldots Y_n$, we can use, for $j=1..n$, the projection functions $\pi_j\colon \vec{X}\rightarrow Y_j$ defined, for $\vec{x}=(v_1,\ldots,v_n)$, by $\pi_j(\vec{x})\triangleq v_j$. In this case, we say that $\pi_1$ to $\pi_n$ are the \emph{components} of $\vec{X}$ and its elements. Since both coalgebras and components are functions from the carrier, we use bracket notation for component to distinguish them, i.e., we write $\vec{x}[\pi_j]$ instead of $\pi_j(\vec{x})$.  %, or, alternatively the \emph{state variables} of states in $X$. 
Whenever we write a state or a carrier  with arrows above them (i.e., $\vec{x}$ or $\vec{X}$), we imply that they have more than one component. Note that if the carrier $X$ has only one component, then it must be the identity function $\id\colon X\rightarrow X$. 
\todo[inline]{Consider $\vec{x}.\pi_j$ too, called dot notation}
%A \emph{$\Monad$-algebra} for a monad $\Monad=(\MFunctor,\eta,\mu)$ is a pair $(\TheSet,\Monad(\TheSet)\xrightarrow{a}\TheSet)$ of an object $\TheSet$ and a morphism $a\colon \Monad(\TheSet)\rightarrow\TheSet$ which, due to the relationship between monads and adjunctions, satisfies two properties: the \emph{multiplication square} and the \emph{unit triangle}, shown in Figure~\ref{fig:MultiplicationSquare}.
%
%%\subsubsection The compositions $a\circ \mu_X$ and $a\circ T(a)$ are equal.
%\begin{figure}[h]
%\centering
%\begin{minipage}{0.45\textwidth}
% \centering
%\begin{tikzcd}
%    T^2(X) \arrow{r}{T(a)} \arrow[swap]{d}{\mu_X} & T(X) \arrow{d}{a} \\
%    T(X) \arrow{r}{a}& X
% \end{tikzcd}
%\end{minipage}
% \begin{minipage}{0.45\textwidth}
% \centering
%\begin{tikzcd}
%    T(X) \arrow{r}{a} \arrow[swap]{dr}{1_{T(X)}} & X\arrow{d}{\eta} \\
%    & T(X)
%  \end{tikzcd}
%  \end{minipage}
%  \caption{Multiplication square (left) and unit triangle (right).}
%\label{fig:MultiplicationSquare}
%\end{figure}
%Given a state structure $S$, we can use the State monad .
%\begin{align}
%State_S(X) = (S\times X)^S 
%\end{align}
%
%\begin{align}
%\eta_X:X\rightarrow  (S\times X)^S\\
%\eta_X(x)= \lambda s \rightarrow (s,x)
%\end{align}
%
%%\begin{align}
%%>>=\colon  (S\rightarrow (T,S))\rightarrow (T\rightarrow (S\rightarrow (Y,S)) \rightarrow  (S\rightarrow (Y,S))\\
%%m >>= f = \lambda s \rightarrow \text{let $(t,s')=m(s)$ in $f(t)(s')$} 
%%\end{align}
%
%\begin{align}
%\mu_X:(S\times (S\times X)^S)^S\rightarrow  (S\times X)^S\\
%\mu_X(\mathbf{x})= \lambda s \rightarrow \text{let $(s',f)=\mathbf{x}(s)$ in f(s')}
%\end{align}
\todo[inline]{THERE IS NO NEED FOR MONADS AT THE MOMENT. Monads seem to be what maps a type $X$ to an initial/final $F$-coalgebra of a functor where $X$ is constant}
\subsection{An Intuition of States and Time}
%\subsection{Catamorphisms, Anamorphisms, Final and Initial $F$-Coalgebras}
\subsection{Anamorphisms and Final $F$-Coalgebras}
Formally, for the functor $F=O\times \texttt{id}^I$, given an $F$-coalgebra $\mathbb{X}=(X,(o,\delta))$, the behaviour of a state $x\in X$ is $\TheBehaviourOfIn{x}{\mathbb{X}}$, an element of the set $O^{I^*}$. 
\subsection{}

\section{Coinduction}
\subsection{Coinduction Proof Principle}
\todo[inline]{Coinductive Definitions?}
\subsection{Bisimulation}
% \section{Spectre}
% \label{sec:Preliminaries:Spectre}
% \todo[inline]{And Meltdown?}
% \subsection{Spectre V1}
% %\todo[inline]{}
% \subsection{Spectre V2}
\section{Cyber-Physical System} 
\todo[inline]{This section probably makes more sense in its own chapter, when we explain what the latent behaviour of a CPS is.}